<html>
  <head><title>MuleUploader test page</title></head>
  <body>
    <input id="file" type="file">
    <script src="../dist/MuleUploader.js"></script>
    <script>
      function onProgress(uploadedSize, fullSize, duration, averageBitrateMbps) {
        var uploadedSizeMB = uploadedSize / 1024 / 1024;
        var fullSizeMB = fullSize / 1024 / 1024;
        console.log('onProgress', uploadedSizeMB.toFixed(1) + 'MB', fullSizeMB.toFixed(1) + 'MB', duration.toFixed(1) + 's', averageBitrateMbps.toFixed(2) + 'Mbps');
      }

      var gcs = new muleUploader.GCSUpload({
        uploadAuthorizationURL: "http://localhost:8081/authorize/upload",
        composeAuthorizationURL: "http://localhost:8081/authorize/compose",
        onProgressCallback: onProgress,
        parallelUploads: 4
      });

      var domFile = document.getElementById("file");
      domFile.addEventListener("change", function (event) {
        gcs.loadFile(this.files[0]);
        //gcs.run();
      });
  </script>
  </body>
</html>